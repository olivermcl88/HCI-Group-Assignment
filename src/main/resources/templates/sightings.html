<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Sighting Details</title>
    
    <link rel="stylesheet" href="/ufo-app/css/sightings.css" />
</head>
<body>
    <div class="container">
        <!-- Navigation for different sightings -->
        <div th:if="${sightings != null and !sightings.isEmpty()}" class="sightings-nav">
            <h3>All Sightings:</h3>
            <ul>
                <li th:each="sighting : ${sightings}">
                    <a th:href="@{/sightings/{id}(id=${sighting.sightingId})}" 
                       th:text="${sighting.title}"
                       th:class="${currentSighting != null and currentSighting.sightingId == sighting.sightingId} ? 'active' : ''">
                       Sighting Title
                    </a>
                </li>
            </ul>
        </div>

        <div th:if="${currentSighting != null}">
            <h1 class="header-title" th:text="${currentSighting.title}">Sightings Title</h1>

            <div class="profile">
                <div class="profile-circle" th:text="${reporter != null ? reporter.firstName?.substring(0,1) : 'U'}">P</div>
                <div>
                    <div><strong th:text="${reporter != null ? reporter.username : 'Unknown User'}">Username</strong></div>
                    <div style="color: gray; font-size: 14px;">Reporter</div>
                </div>
            </div>

            <div class="meta">
                <div class="meta-item">üìÖ <span th:text="${#temporals.format(currentSighting.sightingDate, 'dd/MM/yyyy')}">01/01/25</span></div>
                <div class="meta-item">‚è±Ô∏è <span th:text="${currentSighting.durationMinutes}">12</span> minutes</div>
                <div class="meta-item">üìç <span th:text="${currentSighting.location}">Location</span><br/>
                    <span th:text="${currentSighting.latitude + ', ' + currentSighting.longitude}">Coordinates</span>
                </div>
                <div class="meta-item">üî∫ <span th:text="${currentSighting.shape}">Shape</span></div>
            </div>

            <div class="map-box">Interactive map with pin marking location</div>

            <h3>Description/Comments</h3>
            <textarea readonly th:text="${currentSighting.description}">Lorem ipsum dolor sit amet, consectetur adipiscing elit...</textarea>

            <div class="evidence-buttons">
                <button class="btn">üìÑ View Evidence</button>
                <button class="btn">‚¨ÜÔ∏è Upload Evidence</button>
            </div>

            <h2>Community Validation</h2>
            <div>
                Legitimate: <span th:text="${currentSighting.legitPercentage}">35</span>% &nbsp;&nbsp; 
                Uncertain: <span th:text="${currentSighting.uncertainPercentage}">55</span>% &nbsp;&nbsp; 
                Hoax: <span th:text="${currentSighting.hoaxPercentage}">10</span>%
            </div>

            <div class="validation-bar">
                <div class="legit" th:style="'width: ' + ${currentSighting.legitPercentage} + '%'"></div>
                <div class="uncertain" th:style="'width: ' + ${currentSighting.uncertainPercentage} + '%'"></div>
                <div class="hoax" th:style="'width: ' + ${currentSighting.hoaxPercentage} + '%'"></div>
            </div>

            <form th:action="@{/sightings/{id}/vote(id=${currentSighting.sightingId})}" method="post" class="validation-buttons">
                <button type="submit" name="voteType" value="legit" class="vote-btn vote-legit">Legitimate</button>
                <button type="submit" name="voteType" value="uncertain" class="vote-btn vote-uncertain">Uncertain</button>
                <button type="submit" name="voteType" value="hoax" class="vote-btn vote-hoax">Hoax</button>
            </form>
        </div>

        <div th:if="${currentSighting == null}">
            <h1>No Sightings Available</h1>
            <p>There are currently no UFO sightings to display.</p>
        </div>
    </div>
</body>
</html>
